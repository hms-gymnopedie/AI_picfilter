# ============================================================================
# AI_picfilter Environment Configuration
# ============================================================================
# Copy this file to .env and update values for your environment
# IMPORTANT: Never commit .env with sensitive values to git!
# ============================================================================

# ============================================================================
# Application Configuration
# ============================================================================

# Environment type (development, staging, production)
ENVIRONMENT=production

# FastAPI debug mode (false in production)
DEBUG=false

# API configuration
API_TITLE=AI_picfilter API
API_VERSION=1.0.0

# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL connection string
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://picfilter:your-secure-password@postgres:5432/picfilter

# PostgreSQL user and password (used by docker-compose)
POSTGRES_USER=picfilter
POSTGRES_PASSWORD=change-me-in-production

# PostgreSQL database name
POSTGRES_DB=picfilter

# ============================================================================
# Redis Configuration (Celery Broker)
# ============================================================================

# Redis connection URL
# Format: redis://[:password]@host:port/database
REDIS_URL=redis://redis:6379/0

# ============================================================================
# JWT (Authentication) Configuration
# ============================================================================

# IMPORTANT: Change this to a secure random string in production!
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production

# JWT algorithm (HS256 recommended)
JWT_ALGORITHM=HS256

# Access token expiration (minutes)
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60

# Refresh token expiration (days)
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# S3 / MinIO Object Storage Configuration
# ============================================================================

# MinIO/S3 endpoint
# Development: http://localhost:9000
# Production: https://s3.your-domain.com or AWS S3 endpoint
S3_ENDPOINT=http://minio:9000

# S3 access key
S3_ACCESS_KEY=minioadmin

# S3 secret key
# IMPORTANT: Change this to a secure password in production!
S3_SECRET_KEY=change-me-in-production

# S3 bucket name
S3_BUCKET=picfilter-storage

# S3 region
S3_REGION=us-east-1

# Use SSL for S3 connections (false for local MinIO)
S3_USE_SSL=false

# ============================================================================
# Image Upload Configuration
# ============================================================================

# Maximum file upload size (MB)
MAX_UPLOAD_SIZE_MB=50

# Allowed image MIME types (comma-separated)
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/tiff,image/webp

# ============================================================================
# Celery Configuration
# ============================================================================

# Celery broker URL (usually same as REDIS_URL)
CELERY_BROKER_URL=redis://redis:6379/0

# Celery result backend URL
CELERY_RESULT_BACKEND=redis://redis:6379/0

# ============================================================================
# Email Configuration (Optional)
# ============================================================================

# For sending notifications (if implemented)
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# FROM_EMAIL=noreply@yourdomain.com

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ============================================================================
# Security Configuration
# ============================================================================

# API rate limiting (requests per minute)
RATE_LIMIT_GENERAL=60
RATE_LIMIT_UPLOAD=10
RATE_LIMIT_LEARNING=5

# ============================================================================
# ML Model Configuration (Optional)
# ============================================================================

# Default model type (nilut or lut3d)
DEFAULT_MODEL_TYPE=nilut

# Model cache directory
MODEL_CACHE_DIR=/tmp/models

# ============================================================================
# Production Deployment Notes
# ============================================================================
#
# 1. Database:
#    - Use managed database service (e.g., AWS RDS) in production
#    - Enable automatic backups
#    - Use strong password with special characters
#
# 2. JWT Secret:
#    - Generate secure random key: python -c "import secrets; print(secrets.token_urlsafe(32))"
#    - Store in secure secret management (e.g., AWS Secrets Manager)
#
# 3. S3 Storage:
#    - Use AWS S3 or managed MinIO service in production
#    - Enable bucket versioning for disaster recovery
#    - Configure lifecycle policies for old data
#
# 4. Redis:
#    - Use managed Redis (e.g., AWS ElastiCache) in production
#    - Enable encryption and authentication
#
# 5. SSL/TLS:
#    - Configure Let's Encrypt certificates in Nginx
#    - Enable HSTS header
#
# 6. Monitoring:
#    - Set up application monitoring (New Relic, DataDog, etc.)
#    - Monitor worker health and queue depth
#    - Set up alerts for critical errors
#
# 7. Backups:
#    - Regular database backups (daily or more frequent)
#    - S3 bucket replication for disaster recovery
#
# ============================================================================
